{"pageProps":{"note":{"id":"oQYRM3sMDt7Q6JWDzbjG4","title":"Shell Scripting","desc":"","updated":1672923910585,"created":1642880615533,"custom":{},"fname":"cli.shell-scripting","type":"note","vault":{"fsPath":"vault"},"contentHash":"abf2e24277574caf438790c1b7c97886","links":[],"anchors":{"shell-vs-terminal":{"type":"header","text":"Shell vs Terminal","value":"shell-vs-terminal","line":8,"column":0,"depth":2},"shell-prompt":{"type":"header","text":"shell prompt","value":"shell-prompt","line":14,"column":0,"depth":2},"shell-functions":{"type":"header","text":"shell functions","value":"shell-functions","line":20,"column":0,"depth":2},"environment-variables":{"type":"header","text":"environment variables","value":"environment-variables","line":26,"column":0,"depth":2},"interesting-stuff-from-missing-semester":{"type":"header","text":"interesting stuff from missing semester","value":"interesting-stuff-from-missing-semester","line":31,"column":0,"depth":2},"flags-vs-options":{"type":"header","text":"flags vs options","value":"flags-vs-options","line":39,"column":0,"depth":2},"streams":{"type":"header","text":"streams","value":"streams","line":48,"column":0,"depth":2},"strings":{"type":"header","text":"strings","value":"strings","line":61,"column":0,"depth":2},"special-variable-in-bash-scripting":{"type":"header","text":"special variable in bash scripting","value":"special-variable-in-bash-scripting","line":67,"column":0,"depth":2},"exit-codes-and-short-circuiting":{"type":"header","text":"exit codes and short-circuiting","value":"exit-codes-and-short-circuiting","line":80,"column":0,"depth":2},"wildstars-and-globbing":{"type":"header","text":"wildstars and globbing","value":"wildstars-and-globbing","line":102,"column":0,"depth":2},"scripting-vs-functions":{"type":"header","text":"scripting vs functions","value":"scripting-vs-functions","line":131,"column":0,"depth":2},"tools":{"type":"header","text":"tools","value":"tools","line":151,"column":0,"depth":2}},"children":[],"parent":"ydBpHsjLwIGYomDZo8NtB","data":{}},"body":"<h1 id=\"shell-scripting\">Shell Scripting<a aria-hidden=\"true\" class=\"anchor-heading icon-link\" href=\"#shell-scripting\"></a></h1>\n<h2 id=\"shell-vs-terminal\">Shell vs Terminal<a aria-hidden=\"true\" class=\"anchor-heading icon-link\" href=\"#shell-vs-terminal\"></a></h2>\n<ul>\n<li>kernel - server</li>\n<li>shell - middleware</li>\n<li>terminal - client</li>\n</ul>\n<h2 id=\"shell-prompt\">shell prompt<a aria-hidden=\"true\" class=\"anchor-heading icon-link\" href=\"#shell-prompt\"></a></h2>\n<ul>\n<li><code style=\"background-color: #43b02a40; padding:3px 2px; border-radius: 5px\">$</code> at the end of the prompt ⇒ normal user</li>\n<li><code style=\"background-color: #43b02a40; padding:3px 2px; border-radius: 5px\">#</code> at the end of the prompt ⇒ root user\n<ul>\n<li><code style=\"background-color: #43b02a40; padding:3px 2px; border-radius: 5px\">sudo su</code> to open a terminal as a root user</li>\n</ul>\n</li>\n</ul>\n<h2 id=\"shell-functions\">shell functions<a aria-hidden=\"true\" class=\"anchor-heading icon-link\" href=\"#shell-functions\"></a></h2>\n<ul>\n<li>they are built-in programs stored on our file system</li>\n<li>the shell searches for these programs through the <code style=\"background-color: #43b02a40; padding:3px 2px; border-radius: 5px\">PATH</code> environment variable</li>\n<li><code style=\"background-color: #43b02a40; padding:3px 2px; border-radius: 5px\">which</code> gives the path of the program that would be executed for a particular command</li>\n</ul>\n<h2 id=\"environment-variables\">environment variables<a aria-hidden=\"true\" class=\"anchor-heading icon-link\" href=\"#environment-variables\"></a></h2>\n<ul>\n<li>variables that are automatically set when you start the shell</li>\n<li>example: <code style=\"background-color: #43b02a40; padding:3px 2px; border-radius: 5px\">path</code></li>\n</ul>\n<h2 id=\"interesting-stuff-from-missing-semester\">interesting stuff from <a href=\"https://missing.csail.mit.edu/2020/course-shell/\">missing semester</a><a aria-hidden=\"true\" class=\"anchor-heading icon-link\" href=\"#interesting-stuff-from-missing-semester\"></a></h2>\n<ul>\n<li>almost all files in <code style=\"background-color: #43b02a40; padding:3px 2px; border-radius: 5px\">/bin</code> have a <code style=\"background-color: #43b02a40; padding:3px 2px; border-radius: 5px\">x</code> permission set for the last group\n<ul>\n<li>so that anyone can execute those programs</li>\n</ul>\n</li>\n<li>sudo - do as su(superuser)</li>\n<li>using the sys directory we can interact and do cool stuff with hardware\n<ul>\n<li><a href=\"https://missing.csail.mit.edu/2020/course-shell/#:~:text=a%20versatile%20and%20powerful%20tool\">controling the backlit programtically</a></li>\n</ul>\n</li>\n</ul>\n<h2 id=\"flags-vs-options\">flags vs options<a aria-hidden=\"true\" class=\"anchor-heading icon-link\" href=\"#flags-vs-options\"></a></h2>\n<ul>\n<li>if we pass some value with a flag - option</li>\n<li>here <code style=\"background-color: #43b02a40; padding:3px 2px; border-radius: 5px\">-p</code> (don't follow symlinks) is a flag and <code style=\"background-color: #43b02a40; padding:3px 2px; border-radius: 5px\">iname</code> is an option</li>\n</ul>\n<pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token function\">find</span> -P -iname <span class=\"token string\">'*some_string*'</span>\n</code></pre>\n<h2 id=\"streams\">streams<a aria-hidden=\"true\" class=\"anchor-heading icon-link\" href=\"#streams\"></a></h2>\n<ul>\n<li>in shell, every program have input and output streams, by default set to terminal</li>\n<li>this can be configured using <code style=\"background-color: #43b02a40; padding:3px 2px; border-radius: 5px\">&#x3C; file</code> and <code style=\"background-color: #43b02a40; padding:3px 2px; border-radius: 5px\">> file</code></li>\n<li>this  command reads from hello1 and writes to hello2</li>\n</ul>\n<pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token function\">cat</span> <span class=\"token operator\">&#x3C;</span> hello1.txt <span class=\"token operator\">></span> hello2.txt\n</code></pre>\n<ul>\n<li><code style=\"background-color: #43b02a40; padding:3px 2px; border-radius: 5px\">>> file</code> will append instead of overwriting to a file</li>\n<li>can be also used for streaming media files when combined with <a href=\"https://vitux.com/how-to-cast-video-from-ubuntu-to-chromecast/\">chormecast</a></li>\n</ul>\n<h2 id=\"strings\">strings<a aria-hidden=\"true\" class=\"anchor-heading icon-link\" href=\"#strings\"></a></h2>\n<ul>\n<li>defined with <code style=\"background-color: #43b02a40; padding:3px 2px; border-radius: 5px\">'</code> are string literals</li>\n<li>defined with <code style=\"background-color: #43b02a40; padding:3px 2px; border-radius: 5px\">\"</code> will expand and substitute variables</li>\n<li><a href=\"https://www.gnu.org/software/bash/manual/html_node/Quoting.html\">bash quoting</a></li>\n</ul>\n<h2 id=\"special-variable-in-bash-scripting\">special variable in bash scripting<a aria-hidden=\"true\" class=\"anchor-heading icon-link\" href=\"#special-variable-in-bash-scripting\"></a></h2>\n<ul>\n<li><code style=\"background-color: #43b02a40; padding:3px 2px; border-radius: 5px\">$0</code> - Name of the script</li>\n<li><code style=\"background-color: #43b02a40; padding:3px 2px; border-radius: 5px\">$1</code>to <code style=\"background-color: #43b02a40; padding:3px 2px; border-radius: 5px\">$9</code> - Arguments to the script. <code style=\"background-color: #43b02a40; padding:3px 2px; border-radius: 5px\">$1</code> is the first argument and so on.</li>\n<li><code style=\"background-color: #43b02a40; padding:3px 2px; border-radius: 5px\">$@</code> - All the arguments</li>\n<li><code style=\"background-color: #43b02a40; padding:3px 2px; border-radius: 5px\">$#</code> - Number of arguments</li>\n<li><code style=\"background-color: #43b02a40; padding:3px 2px; border-radius: 5px\">$?</code> - Return code of the previous command</li>\n<li><code style=\"background-color: #43b02a40; padding:3px 2px; border-radius: 5px\">$$</code> - Process identification number (PID) for the current script</li>\n<li><code style=\"background-color: #43b02a40; padding:3px 2px; border-radius: 5px\">!!</code> - Entire last command, including arguments\n<ul>\n<li>can be useful if we realize that the command needs root privileges after executing it for the first time</li>\n<li>just type <code style=\"background-color: #43b02a40; padding:3px 2px; border-radius: 5px\">sudo !!</code> followed by a <code style=\"background-color: #43b02a40; padding:3px 2px; border-radius: 5px\">tab</code></li>\n</ul>\n</li>\n<li><code style=\"background-color: #43b02a40; padding:3px 2px; border-radius: 5px\">$_</code> - Last argument from the last command</li>\n</ul>\n<h2 id=\"exit-codes-and-short-circuiting\">exit codes and short-circuiting<a aria-hidden=\"true\" class=\"anchor-heading icon-link\" href=\"#exit-codes-and-short-circuiting\"></a></h2>\n<pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token boolean\">false</span> <span class=\"token operator\">||</span> <span class=\"token builtin class-name\">echo</span> <span class=\"token string\">\"Oops, fail\"</span>\n<span class=\"token comment\"># Oops, fail</span>\n\n<span class=\"token boolean\">true</span> <span class=\"token operator\">||</span> <span class=\"token builtin class-name\">echo</span> <span class=\"token string\">\"Will not be printed\"</span>\n<span class=\"token comment\">#</span>\n\n<span class=\"token boolean\">true</span> <span class=\"token operator\">&#x26;&#x26;</span> <span class=\"token builtin class-name\">echo</span> <span class=\"token string\">\"Things went well\"</span>\n<span class=\"token comment\"># Things went well</span>\n\n<span class=\"token boolean\">false</span> <span class=\"token operator\">&#x26;&#x26;</span> <span class=\"token builtin class-name\">echo</span> <span class=\"token string\">\"Will not be printed\"</span>\n<span class=\"token comment\">#</span>\n\n<span class=\"token boolean\">true</span> <span class=\"token punctuation\">;</span> <span class=\"token builtin class-name\">echo</span> <span class=\"token string\">\"This will always run\"</span>\n<span class=\"token comment\"># This will always run</span>\n\n<span class=\"token boolean\">false</span> <span class=\"token punctuation\">;</span> <span class=\"token builtin class-name\">echo</span> <span class=\"token string\">\"This will always run\"</span>\n<span class=\"token comment\"># This will always run</span>\n</code></pre>\n<h2 id=\"wildstars-and-globbing\">wildstars and globbing<a aria-hidden=\"true\" class=\"anchor-heading icon-link\" href=\"#wildstars-and-globbing\"></a></h2>\n<ul>\n<li><code style=\"background-color: #43b02a40; padding:3px 2px; border-radius: 5px\">?</code> - to match one character only</li>\n<li><code style=\"background-color: #43b02a40; padding:3px 2px; border-radius: 5px\">*</code> - to match any amount of characters</li>\n<li><code style=\"background-color: #43b02a40; padding:3px 2px; border-radius: 5px\">{}</code> - expand command using a list of arguments</li>\n</ul>\n<pre class=\"language-bash\"><code class=\"language-bash\">convert image.<span class=\"token punctuation\">{</span>png,jpg<span class=\"token punctuation\">}</span>\n<span class=\"token comment\"># Will expand to</span>\nconvert image.png image.jpg\n\n<span class=\"token comment\"># Globbing techniques can also be combined</span>\n\n<span class=\"token comment\"># This will move all *.py and *.sh files</span>\n<span class=\"token function\">mv</span> *<span class=\"token punctuation\">{</span>.py,.sh<span class=\"token punctuation\">}</span> folder\n\n<span class=\"token function\">mkdir</span> foo bar\n<span class=\"token comment\"># This creates files foo/a, foo/b, ... foo/h, bar/a, bar/b, ... bar/h</span>\n<span class=\"token function\">touch</span> <span class=\"token punctuation\">{</span>foo,bar<span class=\"token punctuation\">}</span>/<span class=\"token punctuation\">{</span>a<span class=\"token punctuation\">..</span>h<span class=\"token punctuation\">}</span>\n<span class=\"token function\">touch</span> foo/x bar/y\n\n<span class=\"token comment\"># Show differences between files in foo and bar</span>\n<span class=\"token function\">diff</span> <span class=\"token operator\">&#x3C;</span><span class=\"token punctuation\">(</span><span class=\"token function\">ls</span> foo<span class=\"token punctuation\">)</span> <span class=\"token operator\">&#x3C;</span><span class=\"token punctuation\">(</span><span class=\"token function\">ls</span> bar<span class=\"token punctuation\">)</span>\n<span class=\"token comment\"># Outputs</span>\n<span class=\"token comment\"># &#x3C; x</span>\n<span class=\"token comment\"># ---</span>\n<span class=\"token comment\"># > y</span>\n</code></pre>\n<h2 id=\"scripting-vs-functions\">scripting vs functions<a aria-hidden=\"true\" class=\"anchor-heading icon-link\" href=\"#scripting-vs-functions\"></a></h2>\n<ul>\n<li>\n<p>functions should be in the same language</p>\n</li>\n<li>\n<p>scripts can be in any language</p>\n<ul>\n<li>env can be specified using the <code style=\"background-color: #43b02a40; padding:3px 2px; border-radius: 5px\">shebang</code></li>\n<li>a good practice is to give env name as an argument, rather than the direct path    </li>\n<li>\n<pre class=\"language-bash\"><code class=\"language-bash\">    <span class=\"token comment\">#! usr/bin/env env_name</span>\n    ```\n<span class=\"token operator\">&#x3C;</span>br<span class=\"token operator\">></span>\n</code></pre>\n</li>\n</ul>\n</li>\n<li>\n<p>functions are loaded only for the first time ⇒ they are faster</p>\n</li>\n<li>\n<p>scripts are loaded every time they are executed</p>\n</li>\n</ul>\n<br>\n<ul>\n<li>functions are loaded in the current shell environment\n<ul>\n<li>functions can modify environment variables</li>\n</ul>\n</li>\n<li>scripts are executed in their separate processes</li>\n</ul>\n<h2 id=\"tools\">tools<a aria-hidden=\"true\" class=\"anchor-heading icon-link\" href=\"#tools\"></a></h2>\n<ul class=\"contains-task-list\">\n<li class=\"task-list-item\"><input type=\"checkbox\" disabled> <code style=\"background-color: #43b02a40; padding:3px 2px; border-radius: 5px\">TLDR</code> pages or <code style=\"background-color: #43b02a40; padding:3px 2px; border-radius: 5px\">bro</code> pages instead of <code style=\"background-color: #43b02a40; padding:3px 2px; border-radius: 5px\">man</code> pages</li>\n<li class=\"task-list-item\"><input type=\"checkbox\" disabled> for finding and performing ops on file\n<ul class=\"contains-task-list\">\n<li class=\"task-list-item\"><input type=\"checkbox\" disabled> <code style=\"background-color: #43b02a40; padding:3px 2px; border-radius: 5px\">find</code> command</li>\n<li class=\"task-list-item\"><input type=\"checkbox\" disabled> <code style=\"background-color: #43b02a40; padding:3px 2px; border-radius: 5px\">fd</code> - better alternative</li>\n<li class=\"task-list-item\"><input type=\"checkbox\" disabled> <code style=\"background-color: #43b02a40; padding:3px 2px; border-radius: 5px\">locate</code> - uses indexing</li>\n</ul>\n</li>\n</ul>","noteIndex":{"id":"LBE6GBZjFtOaX27nwRSpq","title":"Notes 📚","desc":"","updated":1642916746120,"created":1642875904363,"custom":{"nav_order":0,"permalink":"/"},"fname":"root","type":"note","vault":{"fsPath":"vault"},"contentHash":"f3ab1afac9d88a8f51c98f4e257b81a2","links":[],"anchors":{},"children":["H8OS9Ap2DDjZ7XSIZWpQT","m2fe4910vhlj3cwsbw45wfc","tpmpx2xkasjhbntai7ejfx3","ydBpHsjLwIGYomDZo8NtB","g9m1mlmymq7qvcjzi8ap2qu"],"parent":null,"data":{},"body":"\n![home](/assets/images/home.png)\n"},"collectionChildren":null,"customHeadContent":null,"config":{"version":5,"dev":{"enablePreviewV2":true},"commands":{"lookup":{"note":{"selectionMode":"extract","confirmVaultOnCreate":false,"leaveTrace":false,"bubbleUpCreateNew":true,"fuzzThreshold":0.2,"vaultSelectionModeOnCreate":"smart"}},"insertNote":{"initialValue":"templates"},"insertNoteLink":{"aliasMode":"none","enableMultiSelect":false},"insertNoteIndex":{"enableMarker":false},"randomNote":{},"copyNoteLink":{"aliasMode":"title"},"templateHierarchy":"template"},"workspace":{"vaults":[{"fsPath":"vault"}],"journal":{"dailyDomain":"daily","name":"journal","dateFormat":"y.MM.dd","addBehavior":"childOfDomain"},"scratch":{"name":"scratch","dateFormat":"y.MM.dd.HHmmss","addBehavior":"asOwnDomain"},"graph":{"zoomSpeed":1,"createStub":false},"enableAutoCreateOnDefinition":false,"enableXVaultWikiLink":false,"enableRemoteVaultInit":true,"workspaceVaultSyncMode":"noCommit","enableAutoFoldFrontmatter":true,"maxPreviewsCached":10,"maxNoteLength":204800,"task":{"name":"","dateFormat":"","addBehavior":"childOfCurrent","statusSymbols":{"":" ","wip":"w","done":"x","assigned":"a","moved":"m","blocked":"b","delegated":"l","dropped":"d","pending":"y"},"prioritySymbols":{"H":"high","M":"medium","L":"low"},"todoIntegration":false,"createTaskSelectionType":"selection2link","taskCompleteStatus":["done","x"]},"enableUserTags":true,"enableHashTags":true,"dendronVersion":"0.83.0","enableEditorDecorations":true,"enableFullHierarchyNoteTitle":false,"templateHierarchy":"template"},"preview":{"enableFMTitle":true,"enableNoteTitleForLink":true,"enablePrettyRefs":true,"enableKatex":true,"automaticallyShowPreview":false,"enableFrontmatterTags":true,"enableHashesForFMTags":false,"theme":"custom"},"publishing":{"enableFMTitle":true,"enableNoteTitleForLink":true,"enablePrettyRefs":true,"enableKatex":true,"assetsPrefix":"/notes","copyAssets":true,"siteHierarchies":["root"],"enableSiteLastModified":true,"siteRootDir":"docs","siteUrl":"https://vinaykakkad.github.io","enableFrontmatterTags":true,"enableHashesForFMTags":false,"enableRandomlyColoredTags":true,"duplicateNoteBehavior":{"action":"useVault","payload":["vault"]},"writeStubs":false,"seo":{"title":"Notes","description":"Notes"},"github":{"enableEditLink":true,"editLinkText":"Edit this page on GitHub","editBranch":"main","editViewMode":"tree"},"enablePrettyLinks":true,"enableTaskNotes":true,"theme":"custom","searchMode":"lookup","siteFaviconPath":"favicon.ico","siteIndex":"root"}}},"__N_SSG":true}